$(function(){var e=[],t=[],o=[],s=$(".file-list tbody tr"),a={work:0,primary:0,category:0,cancel:0,html:0,dev:0,board:0,link:0,extra:0,doneWork:0,doneHtml:0,doneDev:0,doneBoard:0},r=1;$.getJSON("file_list.json",function(t){!function(t){$.each(t,function(t,o){e[t]=o.split(".")[0]})}(t)}).done(function(){s.each(function(){!function(e){var t=e.children("td"),o=t.eq(6).text().toLowerCase();t.has("s").length?e.addClass("cancel"):(o=t.eq(7).text().indexOf("*")>=0?"extra-page":""!=t.eq(0).text()?o?"primary-category "+t.eq(6).text().toLowerCase()+"-page":"primary-category ":o?o+"-page":o+"category",e.addClass(o))}($(this)),function(o){if(o.hasClass("cancel")||o.hasClass("category")||o.hasClass("link-page"))o.prepend("<td></td>"),o.append("<td></td>");else if(o.attr("class").indexOf("page")>=0)for(var s=0;s<e.length;s++){if(o.children("td:nth-child(8)").text()==e[s]){o.prepend("<td>"+r+"</td>"),o.addClass("done").append('<td class="center"><a href="../html/'+e[s]+'.html" class="list-link" target="blank"> DONE </a></td>'),t[s]=!0,r++;break}if(o.children("td:nth-child(8)").text().indexOf("*")>=0){o.prepend("<td></td>"),o.append("<td></td>");break}s==e.length-1&&(o.prepend("<td>"+r+"</td>"),o.append('<td class="center">X</td>'),r++)}else o.prepend("<td></td>"),o.append("<td></td>")}($(this))}),function(){for(var s=0;s<t.length;s++)1!=t[s]&&o.push(e[s]);console.log(o)}(),s.each(function(){var e=$(this).attr("class");"primary-category"==e?a.primary++:"category"==e?a.category++:"cancel"==e&&a.cancel++,e.toLowerCase().indexOf("page")>=0&&(a.work++,e.toLowerCase().indexOf("html")>=0?a.html++:e.toLowerCase().indexOf("develop")>=0?a.dev++:e.toLowerCase().indexOf("board")>=0?a.board++:e.toLowerCase().indexOf("link")>=0?a.link++:e.toLowerCase().indexOf("extra")>=0&&a.extra++),e.toLowerCase().indexOf("done")>=0&&(a.doneWork++,e.toLowerCase().indexOf("html")>=0?a.doneHtml++:e.toLowerCase().indexOf("develop")>=0?a.doneDev++:e.toLowerCase().indexOf("board")>=0&&a.doneBoard++)}),a.work=a.work-a.link-a.extra,console.log(a),$(".progress-all .progress-bar").css({width:Math.floor(a.doneWork/a.work*100)+"%"}).html('<div class="progress-percent">'+Math.floor(a.doneWork/a.work*100)+"%</div>"),$(".all-work").text(a.work+"p"),$(".done-work .progress-bar").css({width:Math.floor(a.doneWork/a.work*100)+"%"}).html('<div class="progress-percent">'+a.doneWork+"p</div>"),$(".all-work-html").text(a.html+"p"),$(".done-work-html .progress-bar").css({width:Math.floor(a.doneHtml/a.html*100)+"%"}).html('<div class="progress-percent">'+a.doneHtml+"p</div>"),$(".all-work-board").text(a.board+"p"),$(".done-work-board .progress-bar").css({width:Math.floor(a.doneBoard/a.board*100)+"%"}).html('<div class="progress-percent">'+a.doneBoard+"p</div>"),$(".all-work-develop").text(a.dev+"p"),$(".done-work-develop .progress-bar").css({width:Math.floor(a.doneDev/a.dev*100)+"%"}).html('<div class="progress-percent">'+a.doneDev+"p</div>")}),$("body").on("click",".js-show-all",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr").removeClass("hide"):$(".file-list tbody tr."+e+"-page").removeClass("hide")}),$("body").on("click",".js-show-done",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr.done").removeClass("hide"):$(".file-list tbody tr."+e+"-page.done").removeClass("hide")}),$("body").on("click",".file-list tr",function(e){console.log($(this).hasClass("cancel")),$(this).find(".list-link").length?window.open($(this).find(".list-link").attr("href")):$(this).hasClass("cancel")?alert("제작이 취소된 페이지 입니다"):alert("준비 중 입니다.")}),$(".tab-sub-list-link").on("click",function(e){e.preventDefault();var t=$(".tab-sub-list-link"),o=$(".tab-contents"),s=t.index($(this));t.removeClass("on"),$(this).addClass("on"),o.removeClass("on"),o.eq(s).addClass("on")})});