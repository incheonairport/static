$(function(){function e(e){$.each(e,function(e,t){a[e]=t.split(".")[0]})}function t(e){var t=e.children("td"),s=t.eq(6).text().toLowerCase();t.has("s").length?e.addClass("cancel"):(s=t.eq(7).text().indexOf("*")>=0?"extra-":s?s+"-":s,e.addClass(s+"category"))}function s(e){if(e.hasClass("cancel")||e.hasClass("category")||e.hasClass("link-category"))e.prepend("<td></td>"),e.append("<td></td>");else for(var t=0;t<a.length;t++){if(e.children("td:nth-child(8)").text()==a[t]){e.prepend("<td>"+c+"</td>"),e.addClass("done").append('<td class="center"><a href="../html/'+a[t]+'.html" class="list-link" target="blank"> DONE </a></td>'),r[t]=!0,c++;break}if(e.children("td:nth-child(8)").text().indexOf("*")>=0){e.prepend("<td></td>"),e.append("<td></td>");break}t==a.length-1&&(e.prepend("<td>"+c+"</td>"),e.append('<td class="center">X</td>'),c++)}}function o(){for(var e=0;e<r.length;e++)1!=r[e]&&d.push(a[e]);console.log(d)}function l(){n.each(function(){var e=$(this).attr("class");"cancel"==e?i[0]++:"category"==e?i[1]++:(i[2]++,e.toLowerCase().indexOf("html")>=0?i[3]++:e.toLowerCase().indexOf("develop")>=0?i[4]++:e.toLowerCase().indexOf("board")>=0?i[5]++:e.toLowerCase().indexOf("link")>=0?i[6]++:e.toLowerCase().indexOf("extra")>=0&&i[11]++,e.toLowerCase().indexOf("done")>=0&&(i[7]++,e.toLowerCase().indexOf("html")>=0?i[8]++:e.toLowerCase().indexOf("develop")>=0?i[9]++:e.toLowerCase().indexOf("board")>=0&&i[10]++))}),$(".progress-all .progress-bar").css({width:Math.floor(i[7]/(i[2]-i[11])*100)+"%"}).html('<div class="progress-percent">'+Math.floor(i[7]/(i[2]-i[11])*100)+"%</div>"),$(".all-work").text(i[2]-i[11]+"p"),$(".done-work .progress-bar").css({width:Math.floor(i[7]/(i[2]-i[11])*100)+"%"}).html('<div class="progress-percent">'+(i[7]-i[11])+"p</div>"),$(".all-work-html").text(i[3]+"p"),$(".done-work-html .progress-bar").css({width:Math.floor(i[8]/i[3]*100)+"%"}).html('<div class="progress-percent">'+i[8]+"p</div>"),$(".all-work-board").text(i[4]+"p"),$(".done-work-board .progress-bar").css({width:Math.floor(i[9]/i[4]*100)+"%"}).html('<div class="progress-percent">'+i[9]+"p</div>"),$(".all-work-develop").text(i[5]+"p"),$(".done-work-develop .progress-bar").css({width:Math.floor(i[10]/i[5]*100)+"%"}).html('<div class="progress-percent">'+i[10]+"p</div>")}var a=[],r=[],d=[],n=$(".file-list tbody tr"),i=new Array(12).fill(0),c=1;$.getJSON("file_list.json",function(t){e(t)}).done(function(){n.each(function(){t($(this)),s($(this))}),o(),l()}),$("body").on("click",".js-show-all",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr").removeClass("hide"):$(".file-list tbody tr."+e+"-category").removeClass("hide")}),$("body").on("click",".js-show-done",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr.done").removeClass("hide"):$(".file-list tbody tr."+e+"-category.done").removeClass("hide")}),$("body").on("click",".file-list tr",function(e){console.log($(this).hasClass("cancel")),$(this).find(".list-link").length?window.open($(this).find(".list-link").attr("href")):$(this).hasClass("cancel")?alert("제작이 취소된 페이지 입니다"):alert("준비 중 입니다.")}),$(".tab-sub-list-link").on("click",function(e){e.preventDefault();var t=$(".tab-sub-list-link"),s=$(".tab-contents"),o=t.index($(this));t.removeClass("on"),$(this).addClass("on"),s.removeClass("on"),s.eq(o).addClass("on")})});