$(function(){function e(){s.each(function(){var e=$(this).attr("class");"primary-category"==e?d.allPrimary++:"category"==e?d.allCategory++:"cancel"==e&&d.allCancel++,e.toLowerCase().indexOf("page")>=0&&(d.allWork++,e.toLowerCase().indexOf("html")>=0?d.allHtml++:e.toLowerCase().indexOf("develop")>=0?d.allDev++:e.toLowerCase().indexOf("board")>=0?d.allBoard++:e.toLowerCase().indexOf("link")>=0?d.allLink++:e.toLowerCase().indexOf("extra")>=0?d.allExtra++:e.toLowerCase().indexOf("iframe")>=0&&d.allIframe++),e.toLowerCase().indexOf("done")>=0&&(d.doneWork++,e.toLowerCase().indexOf("html")>=0?d.doneHtml++:e.toLowerCase().indexOf("develop")>=0?d.doneDev++:e.toLowerCase().indexOf("board")>=0?d.doneBoard++:e.toLowerCase().indexOf("iframe")>=0&&d.doneIframe++)}),d.allWork=d.allWork-d.allLink-d.allExtra,console.log(d),$(".progress-all .progress-bar").css({width:Math.floor(d.doneWork/d.allWork*100)+"%"}).html('<div class="progress-percent">'+Math.floor(d.doneWork/d.allWork*100)+"%</div>"),$(".all-work").text(d.allWork+"p"),$(".done-work .progress-bar").css({width:Math.floor(d.doneWork/d.allWork*100)+"%"}).html('<div class="progress-percent">'+d.doneWork+"p</div>"),$(".all-work-html").text(d.allHtml+"p"),$(".done-work-html .progress-bar").css({width:Math.floor(d.doneHtml/d.allHtml*100)+"%"}).html('<div class="progress-percent">'+d.doneHtml+"p</div>"),$(".all-work-board").text(d.allBoard+"p"),$(".done-work-board .progress-bar").css({width:Math.floor(d.doneBoard/d.allBoard*100)+"%"}).html('<div class="progress-percent">'+d.doneBoard+"p</div>"),$(".all-work-develop").text(d.allDev+"p"),$(".done-work-develop .progress-bar").css({width:Math.floor(d.doneDev/d.allDev*100)+"%"}).html('<div class="progress-percent">'+d.doneDev+"p</div>"),$(".all-work-iframe").text(d.allIframe+"p"),$(".done-work-iframe .progress-bar").css({width:Math.floor(d.doneIframe/d.allIframe*100)+"%"}).html('<div class="progress-percent">'+d.doneIframe+"p</div>"),$(".all-work-link").text(d.allLink+"p"),$(".done-work-link .progress-bar").css({width:Math.floor(d.allLink/d.allLink*100)+"%"}).html('<div class="progress-percent">'+d.allLink+"p</div>")}var l="",a="";!function(){var e=location;l=e.search.replace("?",""),e.pathname.indexOf("release")>0&&(a="/release"),""==l&&(location.href=e.href+"ap.html?ap")}();var t=[],o=[],r=[],s=$(".file-list tbody tr"),d={allWork:0,allPrimary:0,allCategory:0,allCancel:0,allHtml:0,allDev:0,allBoard:0,allLink:0,allExtra:0,allIframe:0,doneWork:0,doneHtml:0,doneDev:0,doneBoard:0,doneIframe:0},n=1;$.getJSON("/static/guide/data/"+l+"_file_data.json",function(e){!function(e){$.each(e,function(e,l){t[e]=l.split(".")[0]})}(e)}).done(function(){s.each(function(){!function(e){var l=e.children("td"),a=l.eq(6).text().toLowerCase();l.has("s").length?(e.addClass("cancel"),l.eq(7).text("")):(a=l.eq(7).text().indexOf("*")>=0?"extra-page":1==l.length&&""!=l.eq(0).text()?"primary-category ":a?a+"-page":a+"category",e.addClass(a))}($(this)),function(e){if(e.hasClass("cancel")||e.hasClass("category")||e.hasClass("link-page"))e.prepend("<td></td>"),e.append("<td></td>");else if(e.attr("class").indexOf("page")>=0)for(var r=0;r<t.length;r++){if(e.children("td:nth-child(8)").text()==t[r]){e.prepend("<td>"+n+"</td>"),e.addClass("done").append('<td class="center"><a href="'+a+"/"+l+"/html/"+t[r]+'.html" class="list-link" target="blank"> DONE </a></td>'),o[r]=!0,n++;break}if(e.children("td:nth-child(8)").text().indexOf("*")>=0){e.prepend("<td></td>"),e.append("<td></td>");break}r==t.length-1&&(e.prepend("<td>"+n+"</td>"),e.append('<td class="center">X</td>'),n++)}else e.prepend("<td></td>"),e.append("<td></td>")}($(this))}),function(){for(var e=0;e<o.length;e++)1!=o[e]&&r.push(t[e]);console.log(r)}(),e()}),$("body").on("click",".js-show-all",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr").removeClass("hide"):($(".file-list tbody tr.category, .file-list tbody tr.primary-category").removeClass("hide"),$(".file-list tbody tr."+e+"-page").removeClass("hide"))}),$("body").on("click",".js-show-done",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr.done").removeClass("hide"):$(".file-list tbody tr."+e+"-page.done").removeClass("hide")}),$("body").on("click",".file-list tr",function(e){console.log($(this).hasClass("cancel")),$(this).find(".list-link").length?window.open($(this).find(".list-link").attr("href")):alert("제작 페이지가 아닙니다.")}),$(".tab-sub-list-item-link").on("click",function(e){e.preventDefault();var l=$(".tab-sub-list-item-link"),a=$(".tab-contents"),t=l.index($(this));l.removeClass("on"),$(this).addClass("on"),a.removeClass("on"),a.eq(t).addClass("on")})});