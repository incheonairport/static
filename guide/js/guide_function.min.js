$(function(){function e(e){var t=e.children("td"),l=t.eq(6).text().toLowerCase();t.has("s").length?(e.addClass("cancel"),t.eq(7).text("")):(l=t.eq(7).text().indexOf("*")>=0?"extra-page":1==t.length&&""!=t.eq(0).text()?"primary-category ":l?l+"-page":l+"category",e.addClass(l))}function t(){d.each(function(){var e=$(this).attr("class");"primary-category"==e?i.allPrimary++:"category"==e?i.allCategory++:"cancel"==e&&i.allCancel++,e.toLowerCase().indexOf("page")>=0&&(i.allWork++,e.toLowerCase().indexOf("html")>=0?i.allHtml++:e.toLowerCase().indexOf("develop")>=0?i.allDev++:e.toLowerCase().indexOf("board")>=0?i.allBoard++:e.toLowerCase().indexOf("link")>=0?i.allLink++:e.toLowerCase().indexOf("extra")>=0?i.allExtra++:e.toLowerCase().indexOf("iframe")>=0&&i.allIframe++),e.toLowerCase().indexOf("done")>=0&&(i.doneWork++,e.toLowerCase().indexOf("html")>=0?i.doneHtml++:e.toLowerCase().indexOf("develop")>=0?i.doneDev++:e.toLowerCase().indexOf("board")>=0?i.doneBoard++:e.toLowerCase().indexOf("iframe")>=0&&i.doneIframe++)}),i.allWork=i.allWork-i.allLink-i.allExtra,console.log(i),$(".progress-all .progress-bar").css({width:Math.floor(i.doneWork/i.allWork*100)+"%"}).html('<div class="progress-percent">'+Math.floor(i.doneWork/i.allWork*100)+"%</div>"),$(".all-work").text(i.allWork+"p"),$(".done-work .progress-bar").css({width:Math.floor(i.doneWork/i.allWork*100)+"%"}).html('<div class="progress-percent">'+i.doneWork+"p</div>"),$(".all-work-html").text(i.allHtml+"p"),$(".done-work-html .progress-bar").css({width:Math.floor(i.doneHtml/i.allHtml*100)+"%"}).html('<div class="progress-percent">'+i.doneHtml+"p</div>"),$(".all-work-board").text(i.allBoard+"p"),$(".done-work-board .progress-bar").css({width:Math.floor(i.doneBoard/i.allBoard*100)+"%"}).html('<div class="progress-percent">'+i.doneBoard+"p</div>"),$(".all-work-develop").text(i.allDev+"p"),$(".done-work-develop .progress-bar").css({width:Math.floor(i.doneDev/i.allDev*100)+"%"}).html('<div class="progress-percent">'+i.doneDev+"p</div>"),$(".all-work-iframe").text(i.allIframe+"p"),$(".done-work-iframe .progress-bar").css({width:Math.floor(i.doneIframe/i.allIframe*100)+"%"}).html('<div class="progress-percent">'+i.doneIframe+"p</div>"),$(".all-work-link").text(i.allLink+"p"),$(".done-work-link .progress-bar").css({width:Math.floor(i.allLink/i.allLink*100)+"%"}).html('<div class="progress-percent">'+i.allLink+"p</div>")}var l="",a="";!function(){var e=location;l=e.search.replace("?",""),e.pathname.indexOf("release")>0&&(a="/release"),""==l&&(location.href=e.href+"ap.html?ap")}();var r=[],s=[],o=[],d=$(".file-list tbody tr"),n=$(".url-list tbody tr"),i={allWork:0,allPrimary:0,allCategory:0,allCancel:0,allHtml:0,allDev:0,allBoard:0,allLink:0,allExtra:0,allIframe:0,doneWork:0,doneHtml:0,doneDev:0,doneBoard:0,doneIframe:0},c=1,p=1;$.getJSON("/static/guide/data/"+l+"_file_data.json",function(e){!function(e){$.each(e,function(e,t){r[e]=t.split(".")[0]})}(e)}).done(function(){d.each(function(){e($(this)),function(e){if(e.hasClass("cancel")||e.hasClass("category")||e.hasClass("link-page"))e.prepend("<td></td>"),e.append("<td></td>");else if(e.attr("class").indexOf("page")>=0)for(var t=0;t<r.length;t++){if(e.children("td:nth-child(8)").text()==r[t]){e.prepend("<td>"+c+"</td>"),e.addClass("done").append('<td class="center"><a href="'+a+"/"+l+"/html/"+r[t]+'.html" class="list-link" target="blank"> DONE </a></td>'),s[t]=!0,c++;break}if(e.children("td:nth-child(8)").text().indexOf("*")>=0){e.prepend("<td></td>"),e.append("<td></td>");break}t==r.length-1&&(e.prepend("<td>"+c+"</td>"),e.append('<td class="center">X</td>'),c++)}else e.prepend("<td></td>"),e.append("<td></td>")}($(this))}),function(){for(var e=0;e<s.length;e++)1!=s[e]&&o.push(r[e]);console.log(o)}(),t(),n.each(function(){e($(this)),function(e){if(e.hasClass("cancel")||e.hasClass("category")||e.hasClass("link-page"))e.prepend("<td></td>"),e.append("<td></td>");else if(e.attr("class").indexOf("page")>=0)if(""!=e.children("td:nth-child(9)").text()){var t=e.children("td:nth-child(9)").html().split("<br>");e.addClass("done").prepend("<td>"+p+"</td>").append('<td class="center"><a href="http://ndev-www.airport.kr/'+t[0]+'" class="list-link" target="_blank"> DONE </a><br /><a href="http://ndev-www.airport.kr/'+t[1]+'" class="list-link" target="_blank"> DONE </a><br /><a href="http://ndev-www.airport.kr/'+t[2]+'" class="list-link" target="_blank"> DONE </a><br /><a href="http://ndev-www.airport.kr/'+t[3]+'" class="list-link" target="_blank"> DONE </a><br /></td>')}else e.prepend("<td></td>"),e.append("<td></td>");else e.prepend("<td></td>"),e.append("<td></td>")}($(this))})}),$("body").on("click",".js-show-all",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr").removeClass("hide"):($(".file-list tbody tr.category, .file-list tbody tr.primary-category").removeClass("hide"),$(".file-list tbody tr."+e+"-page").removeClass("hide"))}),$("body").on("click",".js-show-done",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".file-list tbody tr").addClass("hide"),void 0==e?$(".file-list tbody tr.done").removeClass("hide"):$(".file-list tbody tr."+e+"-page.done").removeClass("hide")}),$("body").on("click",".js-url-show-all",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".url-list tbody tr").addClass("hide"),void 0==e?$(".url-list tbody tr").removeClass("hide"):($(".url-list tbody tr.category, .url-list tbody tr.primary-category").removeClass("hide"),$(".url-list tbody tr."+e+"-page").removeClass("hide"))}),$("body").on("click",".js-url-show-done",function(){$(".btn-type-small").removeClass("on");var e=$(this).attr("class").split(" ")[4];$(this).addClass("on"),$(".url-list tbody tr").addClass("hide"),void 0==e?$(".url-list tbody tr.done").removeClass("hide"):$(".url-list tbody tr."+e+"-page.done").removeClass("hide")}),$("body").on("click",".file-list tr",function(e){$(this).find(".list-link").length?window.open($(this).find(".list-link").attr("href")):alert("제작 페이지가 아닙니다.")}),$("body").on("click",".url-list tr",function(e){$(this).find(".list-link").length||alert("배포 파일이 아닙니다.")}),$(".tab-sub-list-item-link").on("click",function(e){e.preventDefault();var t=$(".tab-sub-list-item-link"),l=$(".tab-contents"),a=t.index($(this));t.removeClass("on"),$(this).addClass("on"),l.removeClass("on"),l.eq(a).addClass("on")})});